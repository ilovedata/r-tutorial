# R 기초 {#basic}


## R 의 계산기 기능

간단한 명령을 몇 가지 살펴보자.
```{r}
1+1
4*3
5/2
3^2
```
결과를 보면 알 수 있겠지만 `+`는 덧셈, `-`는 뻴셈, `*`는 곱셈, `/`는 나눗셈이며 `^`은 거듭제곱을 뜻한다. 
계산 순서는 수학과 마찬가지로 괄호친 부분, 거듭제곱, 곱셈과 나눗셈, 덧셈과 뺄셈 순서로 왼쪽부터 계산한다.


\# 표시가 붙으면 이하의 내용은 주석(comment)으로서 무시한다.
```{r}
# 주석문은 실행되지 않는다.
1 + 1 # 1과 1을 더한다
```
R은 **변수(variable)**에 값을 할당(assign)할 수 있다 ( `=` 또는 `<-`). 아래에서 `x`, `y` 등이 변수이다. 
변수 이름은 알파벳과 숫자, 그리고 밑줄(_)과 마침표(.)로 지을 수 있으나 첫 글자는 알파벳으로 시작해야 한다.
```{r}
x = 1
y = 2
x + y
x <- 1
y <- sqrt(3)
x + y
```

변수에 저장할 수 있는 값은 숫자뿐만이 아니라 문자열도 저장할 수 있다. 문자열은 따옴표(`" "`)안에 문자를 넣어 만들 수 있다.

```{r}
t1 <- "R은 통계 패키지이다"
t2 <- "My name is Tom "
```

## 기본 수학함수

사칙연산 외의 다른 계산들은 함수를 이용한다. 
예를 들어 양의 제곱근을 구하려면 `sqrt` 함수를 쓴다.
그 외에도 자주 쓰이는 함수로 `abs`, `exp`, `log`가 있다. `abs`는 절대값, `exp`는 $e^x$, `log`는 로그값을 구한다.
```{r}
sqrt(2)
abs(-3)
exp(1)
log(2)
```
함수에는 기본값으로 설정된 부분들이 있다. 예를 들어 log 함수의 밑은 e가 기본값이다. 
다시 말해 자연로그를 구한다. 만약 $\log_3(2)$를 구하고 싶다면 다음과 같이 밑을 지정해준다.
```{r}
log(2, base=3)
```

## 도움말

"?함수이름"과 같은 형식으로 입력하면 함수에 대한 도움말 창이 뜬다. 
R의 도움말은 매우 자세하고 대부분 예제를 제공하기 때문에 도움말을 읽어보고 예제를 따라해보면 특별한 교재없이도 많은 공부가 된다.

도움말은 Rstudio은 **plot** 패널에서 **help** 탭(tab)을 선택하고 찾고자 하는 명령어를 입력하면 그에 대한 도움말을 보여준다.    

```{r}
?log
```
만약 함수 이름 자체를 모를 때는 `help.search` 함수를 이용해 도움말을 검색한다.
```{r}
help.search("logarithm")
```

## 벡터

R은 통계용 언어이므로 하나의 값을 다루는 경우보다 여러 개의 값을 한 번에 다뤄야하는 경우가 더 많다. 여러 개의 값을 나타내는 방법에는 벡터(vector), 리스트(list), 행렬(matrix), 데이터프레임(dataframe) 등 다양한 구조의 객체들이 있다. 
가장 기본적인 객체로서 여러 개의 자료를 나타내는 구조는 벡터로서  여러 개의 동일한 형식의 값들을 모아놓은 자료의 구조이다.  벡터는 `c` 함수를 이용해 만든다.
```{r}
c(1,2,3)
c(1,2,3,4,5)
c("Tom", "Jane","철수","영희")
```

하나의 값과 벡터를 사칙연산을 하면 하나의 값이 벡터의 각 값에 반복해서 자동적으로 연산을 한다.
```{r}
1 + c(1,2,3)
```
벡터끼리 사칙연산을 하면 두 벡터에서 같은 위치에 있는 값끼리 연산을 한다.
```{r}
c(1,2,3) + c(4,5,6)
```
두 벡터의 길이가 다르면 짧은 쪽을 반복하여 처음부터 다시 적용한다. 
아래 첫 번째 예의 경우 1+3, 1+4를 하고 5와 6에는 다시 1과 2를 적용해서 계산을 한다. 
긴 벡터의 길이가 짧은 벡터의 길이의 배수인 것이 원칙이지만 그렇지 않더라도 경고(warning)만 뜰 뿐 계산은 된다. 
```{r}
c(1,2) + c(3,4,5,6)
c(1,2,3) + c(4,5,6,7)
```
위의 결과를 보면 연산을 수행할 때 길이가 다른 벡터를 사용할 때는 원하지 않는 결과가 발생할 수 있으므로 주의가 필요하다.

1,2,3,4..와 같이 순서대로 이어지는 정수열은 "시작:끝"과 같은 형태로 콜론(`:`)을 이용해서 벡터를 만들 수 있다.
```{r}
1:5
3:9
```
콜론 대신 `seq` 함수를 사용할 수 있다. 
`seq(끝)`, `seq(시작,끝)`, `seq(시작, 끝, 간격)`과 같은 형태로 사용한다.
```{r}
seq(10)
seq(3,7)
seq(0,1,0.1)
seq(10,1)
```
같은 수가 반복되는 벡터를 만들 때는 `rep` 함수를 사용한다. 
`rep(값, 회수)`라고 하면 값을 회수만큼 반복한다. 
`rep(벡터, 회수)`라고 하면 벡터를 회수만큼 반복한다. 
`rep(벡터, 벡터)`라고 하면 왼쪽 벡터에 있는 값을 오른쪽 벡터에 있는 같은 자리의 회수만큼 반복한다. 
`length` 옵션을 주면 반복해서 해당 길이만큼 되도록 한다.
```{r}
rep(1,5)
rep(1:3, 3)
rep(1:3, 1:3)
rep(1:3, length=10)
```
당연히 벡터도 변수에 할당할 수 있다.
```{r}
v = c(1,2,3)
```

벡터에서 위치로 한 값을 지정하고 싶으면 "변수이름[위치]"와 같은 표현을 사용한다. 위치는 벡터에 저장된 값들이 순서대로 1부터 시작하여 저장된 값의 개수까지 자연수로 표시된다.   
만약 위치가 벡터의 길이를 초과하면 "값 없음(not available)"을 뜻하는 NA 표시가 뜬다.
```{r}
w <- c("Tom", "Jane","철수","영희")
w
w[1]
w[4]
w[5]
```

위치는 하나의 값이 아니라 여러 개의 숫자로 동시에 나타낼 수 있다.

```{r}
w[c(2,4)]
```

```{r}
abc <- 1:10
abc
abc[1]
abc[1:5]
abc[c(2,4,6,8)]
```

벡터를 만드는 경우 주의할 점은 벡터는 같은 형식의 값들로 구성되어야 한다. 예를 들어 기본적으로 문자열과 숫자로 벡터를 만들 수 없다. 만약 아래와 같이 실수 0.1과 문자열 `"Tom"` 으로 벡터를 만들면 숫자 0.1234 이 문자열로 자동적으로 변환된다. 이러한 자동 변환은 가끔 편리할 수 있지만 예상하지 않은 결과를 초래할 수 있으므로 주의해야 한다.

```{r}
t3 <- c(0.1234, "Tom")
t3
```

## 벡터에 대한 함수의 적용 

하나의 값에 적용하는 함수를 벡터에 적용하면 사칙 연산의 경우와 마찬가지로 각각의 값에 적용한다.
```{r}
v <- 1:10
v
log(v)
```
벡터에 적용할 때 하나의 값을 계산하는 함수도 있다. 아래 `mean`은 벡터의 평균을 구하는 함수이다.
```{r}
mean(v)
sd(v)
sum(v)
min(v)
max(v)
summary(v)
```

위에서 나오는 여러 가지 함수는 벡터의 기초 통계량을 계산하는 함수들이다.

- `mean`: 평균
- `sd` : 표준편차(standard deviation)
- `sum`: 합계
- `min`: 최소값
- `max`: 최대값
- `summary` : 벡터의 요약 정보 (최소값, 1사분위수, 중앙값, 평균, 3사분위수, 최대값)


### 데이타프레임 


데이타프레임(dataframe)은 여러 벡터들을 하나로 합쳐놓은 자료의 형태를 가진다. 흔히 사용하는 마이트로소프트사의 엑셀(MS Excel)에서 사용하는 스프레드쉬트(spread sheet) 형태를 가지는 자료이다. 

데이타프레임을 만드는 방법은 먼저 프레임에 포함될  같은 길이를 가지는 벡터들을 만들고 `data.frame`함수로 데이타프레임을 만들 수 있다.
```{r}
a <- 1:5
a
b <- c("철이","John","순이","Paul","영희")
b
c <-rnorm(5,100,10) # 5 random numbers from Normal distribution N(100,10^2)
c
dat <- data.frame(ID=a,  Name=b, Salary=c)
dat
```

테이타프레임에서 하나의 벡터를 꺼내는 방법은 프레임이름뒤에 `$` 를 붙이고 벡터의 변수명을 붙이면 된다.
```{r}
dat$Name
dat$Salary
```

데이타프레임의 자료의 일부를 추출하는 경우 행과 열의 위치를 지정하여 벡터와 유사하게 일부를 나타낼 수 있다. 그 형식은 `dataframe[행의 위치, 열의 위치]` 로 지정한다.

```{r}
dat[1,1]
dat[3,2]
dat[10,1]
dat[3,]
dat[,3]  # dat$Salary와 같은 결과
dat[1:3, c(1,3)]
```

R은  차제가 여러 가지 자료를 포함하고 있으서 자료의 이름을 입력하면 자료를 볼 수 있고 여러 가지 요약 통계를 볼수 있다. 아래에 나오는 `cars`라는 데이타프레임은 두 개의 벡터 `dist`와 `speed`를 포함하는 데이타프레임이다. `cars`데이타프레임은 자동차 운행시 브레이크를 밟았을 때 속도 `speed`에 따른 제동거리 `dist`를 실험으로 구성한 자료이다 (`?cars`를 이용하여 자료의 정보를 볼 수 있다)

```{r}
cars
```


위에서 보았듯이 R은 계산과 분석에 필요한 기능을 함수(function)로 가지고 있으며 함수이름을 치고 괄호안에 필요한 정보를 넣으면 정보를 제공한다. 아래에서 `head` 함수는 자료의 앞부분만을 보는 기능을 하고 `summary` 함수는 자료 `cars`에 있는 변수들의 요약 통계량을 주는 기능을 가진다 

```{r}
head(cars)
summary(cars)
dim(cars)
```

위에서 함수 `dim`은 데이타프레임에서 자료의 갯수(50개)와 변수의 개수(2개)를 벡터 형식으로 알려준다.


## 간단한 그림 그리기

`cars`자료에 있는 `dist` 벡터의 히스토그램과 상자그림은 각각 `hist` 와 `boxplot` 함수로 그릴 수 있다.

```{r}
hist(cars$dist)
```

```{r}
boxplot(cars$dist)
```

데이타프레임 전체에 `plot`함수를 적용하면 데이터프레임안에 있는 모든 변수들의 상자그림을 같이 그려준다.  
```{r}
boxplot(cars)
```

`car`자료에 있는 두 변수의 산포도를 보려면 다음과 같은 `plot` 함수를 이용하면 된다. `plot` 함수는 두 개의 인자(argument)를 `plot(x,y)`와 같이 요구하는데 첫 번째 인자는 x축으로 이용할 변수이고 두 번째 인자는 y 축으로 이용할 변수이다.  

```{r}
plot(cars$speed, cars$dist)
```

```{r}
a <- seq(5,10,0.1)
a
b <- exp(a)
b
plot(a,b)
```

